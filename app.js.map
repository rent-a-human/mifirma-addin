{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./assets/icon-16.png","webpack:///./assets/icon-32.png","webpack:///./assets/icon-80_1.png","webpack:///./src/app/app.js","webpack:///./src/app/attention.js","webpack:///./src/app/services/filedata.service.js","webpack:///./src/app/services/gateway.service.js","webpack:///./src/app/services/session.service.js","webpack:///./src/app/utils.js"],"names":["prodEnvironment","haveCamera","userIp","iter","terms","customerFirstName","userFromOffice","userIsActive","isNewUser","counter","outsideOffice","data","email","password","Office","onReady","info","localStorage","getItem","console","log","host","HostType","Word","getEnvironment","Utils","then","value","filedataService","getIp","respuesta","ip","setItem","document","getElementById","style","paddingTop","innerHTML","getElementsByClassName","element","display","onInput","submit","oninput","onsubmit","onSubmit","event","undefined","preventDefault","target","id","validateEmail","window","location","href","showInputInvalid","sessionService","authId","gatewayService","validate","hit","providedToken","nextStep","properties","TOKEN","resizeTo","attention","title","content","clearForm","borderColor","response","error","statusCode","textContent","isMobile","innerWidth","isTablet","isDesktop","windowInfo","validateUser","browser","os","userExists","login","required1","createAttribute","required2","attributes","setNamedItem","contentFromLS","getIdFromOffice","RefreshLayout","req1","req2","pass1","pass2","createNewUser","password1","password2","disabled","createCustomer","firstName","lastName","user","customerMobile","Respuesta","status","message","idCustomer","validateThisUser","process","askOTPfromUser","modal","form","phoneNumber","resendCode","addEventListener","e","pin","acceptTerms","Resp","success","addToMiFirma","innerText","status_code","modalContent","authority","customerLastName","processTerms","routerInstance","navigate","requiredField","JSON","stringify","isActive","i","push","userFirstName","querySelector","userLastName","togglePassword","togglePassword1","togglePassword2","type","getAttribute","setAttribute","classList","toggle","wantedId","keys","Object","length","str","startsWith","obj","parse","entries","key","t","n","exports","module","define","TypeError","o","enumerable","configurable","writable","defineProperty","s","prototype","create","constructor","r","setPrototypeOf","getPrototypeOf","__proto__","a","ReferenceError","c","l","arguments","createElement","toLowerCase","concat","forEach","appendChild","createTextNode","u","options","useInnerHTML","animation","port","template","createBase","click","close","container","body","beforeRender","afterRender","requestAnimationFrame","cancelAnimationFrame","opacity","toString","parentElement","removeChild","afterClose","beforeClose","destroy","h","call","injectTemplate","render","p","submitText","placeholderText","keyCode","input","placeholder","keyup","handleInput","d","buttonCancel","buttonConfirm","onCancel","onConfirm","Alert","Confirm","Prompt","version","FiledataService","fetch","json","httpOptions","httpOptions3","httpOptions2","url","GatewayMiFirma","GatewayService","publicIP","customerId","parseInt","termsId","method","headers","name","lastname","mobile","phonenumber","userAgent","tablet","desktop","camera","secondcamera","fingerprint","processCode","deviceInfo","publicIp","hasCamera","hasSecondaryCamera","hasFingerprintReader","guid","val","ids","slice","pass","newPassword","file","fileName","fileExtension","path","SessionService","noob","clear","Uint8ArrayToStringBase64","binary","len","byteLength","String","fromCharCode","btoa","stringToUint","src","atob","bytes","Uint8Array","charCodeAt","logout","router","navigateByUrl","getExtensionImageFromURI","base64","substr","Error","indexOf","semicolon","uri","extension","b64toBlob","dataURI","byteString","split","ab","ArrayBuffer","ia","Blob","getHexColorFromRgba","color","datosMaquina","unknown","nVer","navigator","appVersion","nAgt","appName","parseFloat","majorVersion","nameOffset","verOffset","ix","substring","lastIndexOf","toUpperCase","isNaN","clientStrings","cs","test","osVersion","exec","jscd","browserVersion","browserMajorVersion","detectWebcam","mediaDevices","Promise","resolve","reject","enumerateDevices","devices","some","device","kind"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/app/app.js\");\n","module.exports = __webpack_public_path__ + \"assets/icon-16.png\";","module.exports = __webpack_public_path__ + \"assets/icon-32.png\";","module.exports = __webpack_public_path__ + \"assets/icon-80_1.png\";","/*\n * Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\n * See LICENSE in the project root for license information.\n */\n\nimport gatewayService from './services/gateway.service.js';\nimport filedataService from './services/filedata.service.js';\nimport sessionService from './services/session.service.js';\nimport * as attention from './attention.js';\nimport * as Utils from './utils.js';\n\n\n// images references in the manifest\nimport \"../../assets/icon-16.png\";\nimport \"../../assets/icon-32.png\";\nimport \"../../assets/icon-80_1.png\";\n\n/* global document, Office, Word */\n\nlet prodEnvironment;\nlet haveCamera;\nlet userIp;\nlet iter = 0;\nlet terms = [];\nlet customerFirstName;\nlet userFromOffice = false;\nlet userIsActive = false;\nlet isNewUser = false;\nlet counter = 0;\nlet outsideOffice = false;\nconst data = {\n  email: \"\",\n  password: \"\",\n}\n\nOffice.onReady(info => {\n  outsideOffice = (localStorage.getItem('outsideOffice') == 'true');\n  //localStorage.setItem('userFromOffice', userFromOffice);\n  if(userFromOffice){\n    console.log(\"Comienzo\");\n  }\n  \n  console.log(localStorage.getItem('word-document-name1'));\n  console.log(localStorage.getItem('word-document1')); \n  //console.log(info.document.Name);\n  if (info.host === Office.HostType.Word) {\n    getEnvironment();\n    Utils.detectWebcam().then((value) => {\n      haveCamera = value;\n    });\n    filedataService.getIp().then((respuesta) => {      \n      userIp = respuesta.ip;\n      console.log('userIp');\n      console.log(userIp);\n    }).catch(() => {\n      userIp = '127.0.0.1';\n    }).then(() =>{\n      localStorage.setItem('userIp', userIp);\n      //Begin Auth\n      if(localStorage.getItem('user') !== null && localStorage.getItem('noob') !== '0' && !outsideOffice) {\n        data.email = localStorage.getItem('user');\n        document.getElementById(\"email\").value = localStorage.getItem('user');\n        document.getElementById(\"firstName\").value = localStorage.getItem('firstName');\n        document.getElementById(\"lastName\").value = localStorage.getItem('lastName');\n        document.getElementById(\"customerMobile\").value = localStorage.getItem('customerMobile');\n        document.getElementById(\"header\").style.paddingTop = '10px';\n        document.getElementById('welcome-message').innerHTML = 'Verifica tu informacin:';\n        for (let element of document.getElementsByClassName(\"secondScreen\")){\n          element.style.display=\"none\";\n       }\n        onInput();\n        submit();\n      } \n      //End Auth\n    });\n   \n    \n    \n    document.getElementById(\"sideload-msg\").style.display = \"none\";\n    document.getElementById(\"app-body\").style.display = \"flex\";\n    document.getElementById(\"email-field\").oninput = onInput;\n    document.getElementById(\"password-field\").oninput = onInput;\n    document.getElementById(\"login-form\").onsubmit = onSubmit;\n   \n  }\n});\n\n\nfunction onInput(event) {\n  if(event !== undefined){\n    event.preventDefault();\n    const { id, value } = event.target;\n    data[id] = value;\n  } \n  console.log(\"ON INPUT\");\n}\n\nfunction onSubmit(event) {\n  if(event !== undefined){\n  event.preventDefault();\n  }\n  document.getElementById(\"load-banner\").style.display =\"block\";\n\n  if (localStorage.getItem('noob') === '1' && localStorage.getItem('authId') === '0') {\n    //Start Create User\n    console.log('Inicio Proceso Creacion');\n    localStorage.setItem('authId', '1');\n    data.email = localStorage.getItem('user');\n    validateEmail();\n    document.getElementById(\"load-banner\").style.display =\"none\";\n    return;\n  }\n  \n  if (data.password === \"\") { \n    validateEmail();\n    //document.getElementById(\"load-banner\").style.display = \"none\";\n    return;\n  }\n  submit();\n  //document.getElementById(\"load-banner\").style.display = \"none\";\n}\n\nfunction getEnvironment() {\n  prodEnvironment = window.location.href === 'https://app.mifirma.co/';\n}\n\nfunction submit() {\n  counter++;\n  console.log(`Attempt # ${counter} to submit...`);\n  document.getElementById(\"load-banner\").style.display =\"block\";\n\n\n  \n  if (data.password === \"\") { \n    validateEmail();\n    //document.getElementById(\"load-banner\").style.display = \"none\";\n    return;\n  }\n  if (data.email === \"\" && data.password === \"\") {    \n    showInputInvalid();\n    return;\n  }\n\n  if(isNewUser) {\n    console.log(`autenticating this new user with ${sessionService.authId} and ${data.password}`);\n  } else {\n    console.log(`no authentication has been done, will be done with ${sessionService.authId}`);\n  }\n\n  gatewayService.validate(sessionService.authId, data.password)\n    .then((respuesta) => {\n      if (respuesta.data.hit) {\n        var providedToken = respuesta.data.nextStep.properties.TOKEN;\n        if(typeof providedToken !== 'undefined'){\n          localStorage.setItem('token', providedToken);\n          window.resizeTo(1200, 650);\n          window.location.href = 'https://frosty-archimedes-0b2d91.netlify.app/firmador.html'\n          //window.location.href = 'http://localhost:4200/main/documentos';\n        } else {\n          document.getElementById(\"load-banner\").style.display = \"none\";\n          new attention.Alert({\n            title: 'Error en el Backend',\n            content: 'No se ha definido el Token de autorizacin'\n        });\n        }\n        \n        //\n        //routerInstance.navigate('/firmador');\n      } else {\n        clearForm();\n        document.getElementById(\"load-banner\").style.display = \"none\";\n        document.getElementById(\"password-error\").style.display = \"block\";\n        document.getElementById('password').style.borderColor = 'tomato';\n        new attention.Alert({\n          title: 'Error de autenticacin',\n          content: 'Contrasea Incorrecta'\n      });\n        //console.log('Contrasea Incorrecta');\n      }\n    }).catch((response) => {\n      console.log(response);\n      if (response.error && response.error.statusCode === 403) {\n        document.getElementById(\"password-error\").style.display = \"block\";\n        document.getElementById('password-error').style.borderColor = 'tomato';\n        document.getElementById('password-error').textContent= 'Super el mximo de intentos de autenticacin, su usuario ha sido bloqueado por medidas de seguridad';\n        console.log('Super el mximo de intentos de autenticacin, su usuario ha sido bloqueado por medidas de seguridad');\n        //this.router.navigateByUrl('');\n      } else {\n        //this.router.navigateByUrl('main/errorMifirma', { skipLocationChange: true });\n      }\n    });\n}\n\nfunction clearForm() {\n  data.password = \"\";\n}\n\n/**\n* Executes the login process\n*/\nfunction validateEmail() {\n\n  if (data.email === \"\") {\n    showInputInvalid();\n    return;\n  }\n\n  const isMobile = window.innerWidth <= 640;\n  const isTablet = !isMobile && window.innerWidth <= 800;\n  const isDesktop = !isMobile && !isTablet;\n\n  const windowInfo = Utils.datosMaquina(window);\n  console.log('Validating...');\n  if(isNewUser){\n    console.log('this is a new user');\n  }\n  gatewayService.validateUser(\n    data.email,\n    '',\n    userIp,\n    windowInfo.browser,\n    '',\n    windowInfo.os,\n    isMobile,\n    isTablet,\n    isDesktop,\n    haveCamera,\n    false,\n    false\n  ).then((respuesta) => {\n    if (respuesta.data.userExists) {\n      console.log('Logeando user exist...');\n      login(respuesta);\n    } else {\n      //User not found, lets create one\n      const required1 = document.createAttribute(\"required\");\n      const required2 = document.createAttribute(\"required\");\n      document.getElementById(\"datos\").attributes.setNamedItem(required1);\n      document.getElementById(\"terms\").attributes.setNamedItem(required2);\n      localStorage.setItem('authId', respuesta.data.authId);\n      iter++;\n      console.log('Creando este nuevo usuario iter:');\n      if (localStorage.getItem('userFromOffice') && userFromOffice){\n        console.log('El usuario viene de office');\n      } else {\n        console.log('El usuario NO viene de office');\n      }\n      console.log(iter);\n      //console.log(respuesta);\n      for (let element of document.getElementsByClassName(\"thirdScreen\")){\n        element.style.display=\"block\";\n     }\n      var contentFromLS;\n      userFromOffice = (localStorage.getItem('userFromOffice') == 'true');\n      if (userFromOffice && !outsideOffice){\n        contentFromLS = getIdFromOffice();\n        console.log('El usuario SI viene de office');\n        RefreshLayout(); //To hide password and password confirm\n      } else {\n        console.log('El usuario NO viene de office');\n        localStorage.setItem('user', data.email);\n        document.getElementById(\"header\").style.paddingTop = '10px';\n        document.getElementById('welcome-message').innerHTML = 'Verifica tu informacin:';\n        const req1 = document.createAttribute(\"required\");\n        const req2 = document.createAttribute(\"required\");\n        document.getElementById(\"password1\").attributes.setNamedItem(req1);\n        document.getElementById(\"password2\").attributes.setNamedItem(req2);\n\n        //return;\n      }\n      console.log(`fetched: ${contentFromLS}`);\n\n      if(iter>1){\n        //Verificar contrasea\n        var pass1 = document.getElementById('password1');\n        var pass2 = document.getElementById('password2');\n        if (pass1.value !== '' && (pass1.value == pass2.value)){\n          document.getElementById(\"user-error\").innerHTML = 'ERROR EN CREACION: pass not set or invalid';\n        }\n        if(userFromOffice && !isNewUser){\n          createNewUser();\n        } else if (outsideOffice && !isNewUser){\n          createNewUser();\n        }\n      } \n\n      if(!userIsActive && iter>1){\n        return;\n      }\n\n      //after SUCCESS:\n      document.getElementById(\"load-banner\").style.display = \"none\";\n      \n      document.getElementById(\"user-error\").style.display = \"block\";\n      \n      //document.getElementById('email').style.borderColor = 'tomato';\n\n      new attention.Alert({\n        title: 'Usuario creado!...',\n        content: `auth: ${respuesta.data.authId}`\n    });   \n      //console.log(\"user does not exist\")\n    }\n  }).catch((response) => {\n    console.log(\"user error\", response);\n    if (response.error && response.error.statusCode === 403) {\n      new attention.Alert({\n        title: 'Error de autenticacin',\n        content: 'Su usuario ha sido bloqueado por medidas de seguridad, intente ms tarde'\n    });\n      //this.toastr.error('Su usuario ha sido bloqueado por medidas de seguridad, intente ms tarde');\n    } else {\n      //routerInstance.navigate('main/errorMifirma');\n    }\n  });\n}\n\nfunction RefreshLayout(){\n  var pass1 = document.getElementById('pass1'),\n    pass2 = document.getElementById('pass2'),\n    password1 = document.getElementById('password1'),\n    password2 = document.getElementById('password2');\n    pass1.style.display = 'none';\n    pass2.style.display = 'none';\n    document.getElementById(\"email\").disabled = true;\n    password1.value = localStorage.getItem('homeAccountIdentifier');\n    password2.value = password1.value;\n}\n\nfunction createNewUser(){\n  console.log('pass:');\n  console.log(document.getElementById('password1').value);\n  document.getElementById(\"load-banner\").style.display = \"block\";\n  gatewayService.createCustomer(\n    sessionService.firstName, \n    sessionService.lastName,  \n    document.getElementById('password1').value, \n    sessionService.user, \n    sessionService.customerMobile, \n    sessionService.userIp\n    ).then((Respuesta) => {\n      if(Respuesta.status === 'Created' && Respuesta.statusCode === 201){\n        console.log(Respuesta.message);\n        localStorage.setItem('idCustomer', Respuesta.data.idCustomer);\n        validateThisUser();\n      } else {\n        console.log(\"ERROR:\");\n        console.log(Respuesta);\n        return;\n      }\n      \n  });\n//Process\n//then\n  \n}\n\nfunction validateThisUser() {\n  document.getElementById(\"load-banner\").style.display = \"block\";\n  gatewayService.validate(\n    sessionService.authId,\n    \"\"\n    ).then((Respuesta) =>{\n      if (Respuesta.data.hit && Respuesta.data.nextStep.process === 'OTP') {\n        askOTPfromUser();\n      } else {\n        console.log(\"ERROR:\");\n        console.log(Respuesta);\n        return;\n      }\n  });\n}\n\nfunction askOTPfromUser(){\n  document.getElementById(\"load-banner\").style.display = \"none\";\n  const modal = document.getElementById(\"otp-modal\");\n  modal.style.display = \"flex\";\n  const form = document.getElementById(\"otp-form\");\n  const phoneNumber = localStorage.getItem(\"phoneUser\");\n  const resendCode = document.getElementById('resend-code');\n  resendCode.addEventListener('click', function (){\n    validateThisUser();\n  });\n  document.getElementById(\"phoneUs\").innerHTML = phoneNumber;\n  \n  form.addEventListener(\"submit\", e => {\n      e.preventDefault();\n      const pin = document.getElementById(\"opt-input\").value; \n      document.getElementById(\"load-banner\").style.display = \"block\";\n      console.log(`the pin: ${pin}`);\n      gatewayService.validate(\n        sessionService.authId, \n        pin\n        ).then((Respuesta) => {\n          if (Respuesta.data.hit) {\n            console.log('Que falta?');\n            console.log(Respuesta);\n            gatewayService.acceptTerms(\n              sessionService.userIp, \n              sessionService.idCustomer\n              ).then((Resp) => {\n                if (Resp.success){\n                  addToMiFirma();\n                }\n            });            \n\n          } else { //repeat OTP\n            document.getElementById('otp-error').style.display = 'block';\n            document.getElementById('otp-error').innerText='Cdigo Incorrecto';\n            console.log(Respuesta);\n            askOTPfromUser();\n          }\n      });\n  });\n\n\n}\n\nfunction addToMiFirma(){\n  gatewayService.addToMiFirma(\n    sessionService.firstName + ' ' + sessionService.lastName,\n    sessionService.user,\n    sessionService.customerMobile\n    ).then((Resp) => {\n      if(Resp.status_code === 201){\n        isNewUser = true;\n        document.getElementById(\"load-banner\").style.display = \"none\";\n        const modal = document.getElementById(\"otp-modal\");\n        const modalContent = document.getElementById(\"modal-content\");\n        modal.style.display = \"flex\";\n        modalContent.innerHTML = `<h2>Todo sali bien</h2>\n        <p>Ya puedes comenzar a usar MiFirma</p>\n          <div class=\"MF-center\">\n            <button class=\"MF-button2\" id=\"end-process\">Firmar ahora</button>\n          </div>\n        `;\n        document.getElementById('end-process').addEventListener('click', function (){\n          \n          data.email = sessionService.user;\n          data.password = sessionService.authority;\n          console.log(`Iniciando Sesion... con ${data.email} y ${data.password}`); \n          validateEmail(); //this should refresh authid\n        });        \n      }\n    });\n}\n\nfunction login(respuesta) {\n  localStorage.setItem('personaNombre',\n    `${respuesta.data.user.customerFirstName} ${respuesta.data.user.customerLastName}`);\n  localStorage.setItem('phoneUser', respuesta.data.user.customerMobile);\n  localStorage.setItem('correo', data.email);\n  localStorage.setItem('personaId', respuesta.data.user.idCustomer);\n  localStorage.setItem('authId', respuesta.data.authId);\n\n  nextStep(respuesta);\n}\n\nfunction nextStep(respuesta) {\n  console.log('Next step:')\n  console.log(respuesta.data.nextStep.process);\n  switch (respuesta.data.nextStep.process) {\n    case 'Registro':\n      console.log('Registrando Usuario...');//not active\n      break;\n    case 'Terminos':\n      processTerms(respuesta);\n      break;\n    case 'Facial':\n      routerInstance.navigate(['login/facial']);\n      break;\n    case 'OTP':\n      routerInstance.navigate(['login']);\n      break;\n    case 'Password':\n      if(isNewUser) {\n        document.getElementById(\"password\").value = document.getElementById(\"password1\").value;\n        data.password = document.getElementById(\"password\").value;\n        console.log('key: ');\n        console.log(data.password);\n        submit();\n      } else {\n        const requiredField = document.createAttribute(\"required\");\n        document.getElementById(\"customerName\").innerText = localStorage.getItem('personaNombre');\n        document.getElementById(\"password\").attributes.setNamedItem(requiredField);\n        document.getElementById(\"submit-btn\").textContent = \"Ingresar\";\n        document.getElementById(\"load-banner\").style.display = \"none\";\n        for (let element of document.getElementsByClassName(\"firstScreen\")){\n          element.style.display=\"none\";\n        }\n        for (let element of document.getElementsByClassName(\"secondScreen\")){\n          element.style.display=\"block\";\n        }\n      }\n    break;\n  }\n}\n\nfunction processTerms(respuesta) {\n  if (JSON.stringify(respuesta.data.nextStep.properties) == '{}') {\n    gatewayService.validate(respuesta.data.authId, '').then((Respuesta) => {\n      if (!respuesta.data.user.isActive) {\n        //routerInstance.navigate(['registro/activar/cuenta']);\n      } else {\n        nextStep(Respuesta);\n      }\n    }).catch((response) => {\n      console.log(response)\n      if (response.error && response.error.statusCode === 403) {\n        console.log('Su usuario ha sido bloqueado por medidas de seguridad, intente ms tarde');\n      } else {\n        // routerInstance.navigate('main/errorMifirma');\n      }\n    });\n  } else {\n    console.log(\"Unhandled Terms! \");\n    document.getElementById(\"load-banner\").style.display = \"none\";\n      new attention.Alert({\n        title: 'Terminos y condiciones',\n        content: 'Hemos actualizado nuestros trminos y condiciones'\n    });  \n    for (let i in respuesta.data.nextStep.properties) {\n      terms.push(+respuesta.data.nextStep.properties[i]);\n    }\n    console.log(terms);\n    // this.fdService.terms(this.terms);\n    if (!respuesta.data.user.isActive) {\n      localStorage.setItem('noActive', 'false');\n    }\n    //routerInstance.navigate(['login/terminos']);\n  }\n}\n\nfunction showInputInvalid() {\n  document.getElementById(\"load-banner\").style.display = \"none\";\n  new attention.Alert({\n        title: 'Error de autenticacin',\n        content: 'Correo o contrasea invlidos'\n    }); \n  //console.log(\"invalid input\")\n}\n\nconst userFirstName = document.querySelector('#firstName');\nconst userLastName = document.querySelector('#lastName');\nconst customerMobile = document.querySelector('#customerMobile');\nconst togglePassword = document.querySelector('#togglePassword');\nconst togglePassword1 = document.querySelector('#togglePassword1');\nconst togglePassword2 = document.querySelector('#togglePassword2');\nconst password = document.querySelector('#password');\nconst password1 = document.querySelector('#password1');\nconst password2 = document.querySelector('#password2');\n\nuserFirstName.addEventListener('keyup', function (){\n  localStorage.setItem('firstName', userFirstName.value);\n});\n\nuserLastName.addEventListener('keyup', function (){\n  localStorage.setItem('lastName', userLastName.value);\n});\n\ncustomerMobile.addEventListener('keyup', function (){\n  localStorage.setItem('customerMobile', customerMobile.value);\n});\n\ntogglePassword.addEventListener('click', function (e) {\n    // toggle the type attribute\n    const type = password.getAttribute('type') === 'password' ? 'text' : 'password';\n    password.setAttribute('type', type);\n    // toggle the eye slash icon\n    this.classList.toggle('fa-eye-slash');\n});\ntogglePassword1.addEventListener('click', function (e) {\n    // toggle the type attribute\n    const type = password1.getAttribute('type') === 'password' ? 'text' : 'password';\n    password1.setAttribute('type', type);\n    // toggle the eye slash icon\n    this.classList.toggle('fa-eye-slash');\n});\ntogglePassword2.addEventListener('click', function (e) {\n    // toggle the type attribute\n    const type = password2.getAttribute('type') === 'password' ? 'text' : 'password';\n    password2.setAttribute('type', type);\n    // toggle the eye slash icon\n    this.classList.toggle('fa-eye-slash');\n});\n//new code for adding vanilla store (from main.js)\n\nfunction getIdFromOffice() {\n  var wantedId = 0;\n  var keys = Object.keys(localStorage),\n      i = keys.length;\n  while ( i-- ) {\n      var str = keys[i];\n      if(str.startsWith(\"{\")){\n        var obj = JSON.parse(str);\n        //console.log(obj);\n        for (var [key, value] of Object.entries(obj)) {\n          localStorage.setItem(key, value);\n          if(key === 'homeAccountIdentifier'){\n            console.log(`found: ${key}: ${value}`);\n            wantedId = value;\n            userFromOffice = true;\n            localStorage.setItem('userFromOffice', userFromOffice);\n          }      \n        }\n      }\n      \n      }\n  return wantedId;\n}","!(function(t, n) {\n  \"object\" == typeof exports && \"undefined\" != typeof module\n    ? n(exports)\n    : \"function\" == typeof define && define.amd\n    ? define([\"exports\"], n)\n    : n(((t = t || self).Attention = {}));\n})(this, function(t) {\n  \"use strict\";\n  function i(t, n) {\n    if (!(t instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n  }\n  function o(t, n) {\n    for (var e = 0; e < n.length; e++) {\n      var i = n[e];\n      (i.enumerable = i.enumerable || !1),\n        (i.configurable = !0),\n        \"value\" in i && (i.writable = !0),\n        Object.defineProperty(t, i.key, i);\n    }\n  }\n  function s(t, n, e) {\n    return n && o(t.prototype, n), e && o(t, e), t;\n  }\n  function n(t, n) {\n    if (\"function\" != typeof n && null !== n) throw new TypeError(\"Super expression must either be null or a function\");\n    (t.prototype = Object.create(n && n.prototype, { constructor: { value: t, writable: !0, configurable: !0 } })),\n      n && e(t, n);\n  }\n  function r(t) {\n    return (r = Object.setPrototypeOf\n      ? Object.getPrototypeOf\n      : function(t) {\n          return t.__proto__ || Object.getPrototypeOf(t);\n        })(t);\n  }\n  function e(t, n) {\n    return (e =\n      Object.setPrototypeOf ||\n      function(t, n) {\n        return (t.__proto__ = n), t;\n      })(t, n);\n  }\n  function a(t, n) {\n    return !n || (\"object\" != typeof n && \"function\" != typeof n)\n      ? (function(t) {\n          if (void 0 === t) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n          return t;\n        })(t)\n      : n;\n  }\n  function c(t) {\n    return \"string\" == typeof t;\n  }\n  function l(t, n, e) {\n    var i = 0 < arguments.length && void 0 !== t ? t : \"div\",\n      o = 1 < arguments.length && void 0 !== n ? n : null,\n      s = 2 < arguments.length && void 0 !== e ? e : [],\n      r = document.createElement(i);\n    if (null !== o) {\n      var a = function(n) {\n        var t;\n        ((t = n).startsWith(\"on\") ? t.toLowerCase() : \"on\".concat(t)) in window\n          ? r.addEventListener(n, function(t) {\n              o[n](t, r);\n            })\n          : r.setAttribute(n, o[n]);\n      };\n      for (var c in o) a(c);\n    }\n    return (\n      0 < s.length &&\n        s.forEach(function(t) {\n          \"string\" == typeof t ? r.appendChild(document.createTextNode(t)) : r.appendChild(t);\n        }),\n      r\n    );\n  }\n  var u = (function() {\n      function n(t) {\n        i(this, n),\n          (this.options = t),\n          c(t.title) && (this.title = t.title),\n          (this.useInnerHTML = !0 === t.useInnerHTML),\n          c(t.content) && (this.content = t.content),\n          t.animation && (\"boolean\" == typeof t.animation || c(t.animation))\n            ? (this.animation = t.animation)\n            : (this.animation = \"fade\"),\n          (this.port = null),\n          (this.template = this.createBase());\n      }\n      return (\n        s(n, [\n          {\n            key: \"createBase\",\n            value: function() {\n              var t,\n                n = this,\n                e = l(\"div\", {\n                  class: \"close\",\n                  click: function() {\n                    n.close();\n                  }\n                });\n              return (\n                (e.innerHTML =\n                  '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/><path d=\"M0 0h24v24H0z\" fill=\"none\"/></svg>'),\n                (this.port = l(\"div\", { class: \"port\" })),\n                (t = \"fade\" === this.animation ? \"opacity:0;\" : \"\"),\n                (this.container = l(\"div\", { class: \"attention-component\", style: t }, [\n                  l(\"div\", { class: \"inner\" }, [l(\"div\", { class: \"content\" }, [e, this.port])])\n                ])),\n                this.container\n              );\n            }\n          },\n          {\n            key: \"render\",\n            value: function(t) {\n              var n,\n                e,\n                i,\n                o = 0 < arguments.length && void 0 !== t ? t : document.body;\n              this.options.beforeRender && this.options.beforeRender(this),\n                o.appendChild(this.template),\n                this.options.afterRender && this.options.afterRender(this),\n                \"fade\" === this.animation &&\n                  ((n = this.template),\n                  (i = 0),\n                  window.requestAnimationFrame(function t() {\n                    100 <= i\n                      ? (window.cancelAnimationFrame(t), e && e(n))\n                      : ((i += 10), (n.style.opacity = (i / 100).toString()), window.requestAnimationFrame(t));\n                  }));\n            }\n          },\n          {\n            key: \"destroy\",\n            value: function() {\n              this.container.parentElement.removeChild(this.container),\n                this.options.afterClose && this.options.afterClose(this);\n            }\n          },\n          {\n            key: \"close\",\n            value: function() {\n              var n,\n                e,\n                i,\n                t = this;\n              this.options.beforeClose && this.options.beforeClose(this),\n                this.animation\n                  ? \"fade\" === this.animation &&\n                    ((n = this.container),\n                    (e = function() {\n                      t.destroy();\n                    }),\n                    (i = 100),\n                    window.requestAnimationFrame(function t() {\n                      i <= 0\n                        ? (window.cancelAnimationFrame(t), e && e(n))\n                        : ((i -= 10), (n.style.opacity = (i / 100).toString()), window.requestAnimationFrame(t));\n                    }))\n                  : this.destroy();\n            }\n          }\n        ]),\n        n\n      );\n    })(),\n    h = (function() {\n      function e(t) {\n        var n;\n        return i(this, e), (n = a(this, r(e).call(this, t))).injectTemplate(), n.render(), n;\n      }\n      return (\n        n(e, u),\n        s(e, [\n          {\n            key: \"injectTemplate\",\n            value: function() {\n              var t,\n                n = l(\"div\", { class: \"head\" }, [l(\"p\", { class: \"title\" }, [this.title])]);\n              if ((this.port.appendChild(n), this.useInnerHTML)) {\n                var e = l(\"div\", { class: \"content\" });\n                (e.innerHTML = this.content), (t = l(\"div\", { class: \"inner-container\" }, [e]));\n              } else t = l(\"div\", { class: \"inner-container\" }, [l(\"p\", { class: \"content\" }, [this.content])]);\n              this.port.appendChild(n), this.port.appendChild(t);\n            }\n          }\n        ]),\n        e\n      );\n    })(),\n    p = (function() {\n      function e(t) {\n        var n;\n        return (\n          i(this, e),\n          ((n = a(this, r(e).call(this, t))).submitText = c(t.submitText) ? t.submitText : \"Send\"),\n          (n.placeholderText = c(t.placeholderText) ? t.placeholderText : \"Type\"),\n          n.injectTemplate(),\n          n.render(),\n          n\n        );\n      }\n      return (\n        n(e, u),\n        s(e, [\n          {\n            key: \"handleInput\",\n            value: function(t) {\n              (\"Enter\" !== t.key && 13 !== t.keyCode) || this.submit();\n            }\n          },\n          {\n            key: \"submit\",\n            value: function() {\n              var t = this.input.value;\n              \"\" !== t && (this.close(), this.options.onSubmit && this.options.onSubmit(this, t));\n            }\n          },\n          {\n            key: \"injectTemplate\",\n            value: function() {\n              var e = this,\n                t = l(\"div\", { class: \"head\" }, [l(\"p\", { class: \"title\" }, [this.title])]);\n              this.port.appendChild(t),\n                (this.input = l(\"input\", {\n                  type: \"text\",\n                  class: \"input\",\n                  placeholder: this.placeholderText,\n                  keyup: function(t, n) {\n                    e.handleInput(t, n);\n                  }\n                }));\n              var n,\n                i = l(\"div\", { class: \"prompt-elements\" }, [\n                  this.input,\n                  l(\n                    \"button\",\n                    {\n                      class: \"button\",\n                      click: function() {\n                        e.submit();\n                      }\n                    },\n                    [this.submitText]\n                  )\n                ]);\n              if (this.useInnerHTML) {\n                var o = l(\"div\", { class: \"content\" });\n                (o.innerHTML = this.content), (n = l(\"div\", { class: \"inner-container\" }, [o, i]));\n              } else n = l(\"div\", { class: \"inner-container\" }, [l(\"p\", { class: \"content\" }, [this.content]), i]);\n              this.port.appendChild(t), this.port.appendChild(n);\n            }\n          }\n        ]),\n        e\n      );\n    })(),\n    d = (function() {\n      function e(t) {\n        var n;\n        return (\n          i(this, e),\n          ((n = a(this, r(e).call(this, t))).buttonCancel = c(t.buttonCancel) ? t.buttonCancel : \"No\"),\n          (n.buttonConfirm = c(t.buttonConfirm) ? t.buttonConfirm : \"Agree\"),\n          n.injectTemplate(),\n          n.render(),\n          n\n        );\n      }\n      return (\n        n(e, u),\n        s(e, [\n          {\n            key: \"injectTemplate\",\n            value: function() {\n              var t,\n                n = this,\n                e = l(\"div\", { class: \"head\" }, [l(\"p\", { class: \"title\" }, [this.title])]);\n              if ((this.port.appendChild(e), this.useInnerHTML)) {\n                var i = l(\"div\", { class: \"content\" });\n                (i.innerHTML = this.content), (t = l(\"div\", { class: \"inner-container\" }, [i]));\n              } else t = l(\"div\", { class: \"inner-container\" }, [l(\"p\", { class: \"content\" }, [this.content])]);\n              t.appendChild(\n                l(\"div\", { class: \"buttons\" }, [\n                  l(\n                    \"button\",\n                    {\n                      class: \"cancel\",\n                      click: function() {\n                        n.close(), n.options.onCancel && n.options.onCancel(n);\n                      }\n                    },\n                    [this.buttonCancel]\n                  ),\n                  l(\n                    \"button\",\n                    {\n                      class: \"confirm\",\n                      click: function() {\n                        n.close(), n.options.onConfirm && n.options.onConfirm(n);\n                      }\n                    },\n                    [this.buttonConfirm]\n                  )\n                ])\n              ),\n                this.port.appendChild(e),\n                this.port.appendChild(t);\n            }\n          }\n        ]),\n        e\n      );\n    })();\n  (t.Alert = h),\n    (t.Confirm = d),\n    (t.Prompt = p),\n    (t.version = \"0.1.0\"),\n    Object.defineProperty(t, \"__esModule\", { value: !0 });\n});\n","class FiledataService {\r\n\r\n    getIp() {\r\n        return fetch('https://jsonip.com').then(response => response.json());\r\n    }\r\n\r\n}\r\n\r\nconst filedataService = new FiledataService();\r\n\r\nexport default filedataService;","const httpOptions = {\r\n    'Content-Type': 'application/json',\r\n    'ChannelAuthorization': 'Basic MDJDQ0VFQkEtMTE1Mi00MkY3LThEMUEtREYxREJDRjRBRjA2OjAyMzEyRkU3LTQ5MDUtNEQ1Qy1BQ0I1LTUyQTQ2QzYxMzE5NQ=='\r\n};\r\n\r\nconst httpOptions3 = {\r\n    'Content-Type': 'application/json',\r\n    'Authorization': 'Bearer ' + localStorage.getItem(\"token\")\r\n};\r\n\r\nconst httpOptions2 = () => ({\r\n    'Content-Type': 'application/json',\r\n    'ChannelAuthorization': 'Basic MDJDQ0VFQkEtMTE1Mi00MkY3LThEMUEtREYxREJDRjRBRjA2OjAyMzEyRkU3LTQ5MDUtNEQ1Qy1BQ0I1LTUyQTQ2QzYxMzE5NQ==',\r\n    'Authorization': 'Bearer ' + localStorage.getItem(\"token\")\r\n});\r\n\r\nconst url = \"https://olsrvpruwbce01:6595/\";\r\nconst GatewayMiFirma = \"https://olsrvpruwbce01:6741/\";\r\n\r\nexport class GatewayService {\r\n\r\n    acceptTerms(userIp, idCustomer) {\r\n        const data = {\r\n            publicIP: userIp,\r\n            customerId: parseInt(idCustomer),\r\n            termsId: [7,8],\r\n        }\r\n        console.log('DATA ACC:');\r\n        console.log(data);\r\n        return fetch(`${url}Gateway/api/v2_0/terms/acceptance`, {\r\n            method: \"POST\",\r\n            body: JSON.stringify(data),\r\n            headers: httpOptions,\r\n        }).then(response => response.json());\r\n    }\r\n\r\n    createCustomer(name, lastname, password, user, mobile, ip) {\r\n        const data = {\r\n            firstName: name,\r\n            lastName: lastname,\r\n            password: password,\r\n            user: user,\r\n            customerMobile: mobile,\r\n            publicIP: ip,\r\n        }\r\n        return fetch(`${url}Gateway/api/v2_0/createCustomer`, {\r\n            method: \"POST\",\r\n            body: JSON.stringify(data),\r\n            headers: httpOptions,\r\n        }).then(response => response.json());\r\n    }\r\n    validateUser(user, phonenumber, ip, browser, userAgent, os, mobile, tablet,\r\n        desktop, camera, secondcamera, fingerprint, processCode = undefined) {\r\n        const data = {\r\n            user: user,\r\n            phoneNumber: phonenumber,\r\n            deviceInfo: {\r\n                publicIp: ip,\r\n                browser: browser,\r\n                os: os,\r\n                isMobile: mobile,\r\n                isTablet: tablet,\r\n                isDesktop: desktop,\r\n                hasCamera: camera,\r\n                hasSecondaryCamera: secondcamera,\r\n                hasFingerprintReader: fingerprint\r\n            }\r\n        }\r\n        if (processCode) data.processCode = processCode;\r\n        console.log(`processCode: ${processCode}`);\r\n        console.log(data);\r\n        return fetch(`${url}Gateway/api/v2_0/validate/user`, {\r\n            method: \"POST\",\r\n            body: JSON.stringify(data),\r\n            headers: httpOptions,\r\n        }).then(response => response.json());\r\n    }\r\n    validate(guid, data) {\r\n        const val = {\r\n            guid: guid,\r\n            data: data\r\n        }\r\n        console.log(val);\r\n        return fetch(`${url}Gateway/api/v2_0/validate`, {\r\n            method: \"POST\",\r\n            body: JSON.stringify(val),\r\n            headers: httpOptions,\r\n        }).then(response => response.json());\r\n    }\r\n\r\n    getTerms() {\r\n        return fetch(`${url}Gateway/Terms`).then(response => response.json());\r\n    }\r\n\r\n    getEspecificTerms(ids) {\r\n        let id = \"\";\r\n        for (let i = 0; i < ids.length; i++) {\r\n            id += \"ids=\" + ids[i] + \"&\"\r\n        }\r\n\r\n        id = id.slice(0, -1)\r\n\r\n        return fetch(`${url}Gateway/EspecificTerms/${id}`).then(response => response.json());\r\n    }\r\n\r\n    resetPassword(pass) {\r\n        const data = {\r\n            newPassword: pass,\r\n        }\r\n        return fetch(`${url}Gateway/ResetPassword`, {\r\n            method: \"POST\",\r\n            body: JSON.stringify(data),\r\n            headers: httpOptions2(),\r\n        }).then(response => response.json());\r\n    }\r\n\r\n    addToMiFirma(name, email, phoneNumber) {\r\n        const data = {\r\n            name: name,\r\n            email: email,\r\n            phoneNumber: parseInt(phoneNumber)\r\n        }\r\n        return fetch(`${GatewayMiFirma}Gateway/api/v1_0/user/create`, {\r\n            method: \"POST\",\r\n            body: JSON.stringify(data),\r\n            headers: httpOptions,\r\n        }).then(response => response.json());\r\n    }\r\n\r\n    uploadSignature(file, fileName, fileExtension) {\r\n        console.log(httpOptions3);\r\n        const data = {\r\n            file: file,\r\n            fileName: fileName,\r\n            fileExtension: fileExtension\r\n        }\r\n        const path = `${GatewayMiFirma}Gateway/api/v1_0/graph/save`;\r\n        //console.log(path);\r\n        //console.log(data);\r\n        return fetch(path, {\r\n            method: \"POST\",\r\n            body: JSON.stringify(data),\r\n            headers: httpOptions3\r\n        }).then(response => response.json());\r\n    }\r\n\r\n\r\n}\r\n\r\nconst gatewayService = new GatewayService();\r\n\r\nexport default gatewayService;","class SessionService {\r\n  constructor() { }\r\n\r\n  get authority(){\r\n    return localStorage.getItem('homeAccountIdentifier');\r\n  }\r\n  get idCustomer() {\r\n    return localStorage.getItem('idCustomer');\r\n  }\r\n\r\n  get userId() {\r\n    return localStorage.getItem('personaId');\r\n  }\r\n\r\n  get authId() {\r\n    return localStorage.getItem('authId');\r\n  }\r\n\r\n  get identificadorOtp() {\r\n    return localStorage.getItem('identificadorOTP');\r\n  }\r\n\r\n  get recoRestrictive() {\r\n    return localStorage.getItem('reconoserRestrictive');\r\n  }\r\n\r\n  get otpRestrictive() {\r\n    return localStorage.getItem('otpRestrictive');\r\n  }\r\n\r\n  get username() {\r\n    return localStorage.getItem('personaNombre');\r\n  }\r\n\r\n  get documentUser() {\r\n    return localStorage.getItem('documento');\r\n  }\r\n\r\n  get emailUser() {\r\n    return localStorage.getItem('correo');\r\n  }\r\n\r\n  get reconoserGuid() {\r\n    return localStorage.getItem('reconoserGuid');\r\n  }\r\n\r\n  get reconoserUrl() {\r\n    return localStorage.getItem('reconoserUrl');\r\n  }\r\n\r\n  get validarOtp() {\r\n    return localStorage.getItem('validarOtp');\r\n  }\r\n\r\n  get phoneUser() {\r\n    return localStorage.getItem('celular');\r\n  }\r\n\r\n  get phoneUser2() {\r\n    return localStorage.getItem('phoneUser');\r\n  }\r\n\r\n  get isLogged() {\r\n    return localStorage.getItem('token') != null;\r\n  }\r\n\r\n  get isRequestPending() {\r\n    return localStorage.getItem('pendingRequest') != null;\r\n  }\r\n\r\n  get isANoob() {\r\n    return localStorage.getItem('noob') === '1';\r\n  }\r\n\r\n  get isNoobNull() {\r\n    return localStorage.getItem('noob') == null;\r\n  }\r\n\r\n  get firstName() {\r\n    return localStorage.getItem('firstName');\r\n  }\r\n\r\n  get lastName() {\r\n    return localStorage.getItem('lastName');\r\n  }\r\n\r\n  get customerMobile() {\r\n    return localStorage.getItem('customerMobile');\r\n  }\r\n\r\n  get user() {\r\n    return localStorage.getItem('user');\r\n  }\r\n\r\n  get userIp() {\r\n    return localStorage.getItem('userIp');\r\n  }\r\n\r\n\r\n  set signatureGuid(value) {\r\n    localStorage.setItem('firma', value);\r\n  }\r\n\r\n  logout() {\r\n    let noob = localStorage.getItem('noob');\r\n    if (noob == null) {\r\n        noob = '1';\r\n    }\r\n    localStorage.clear();\r\n    localStorage.setItem('noob', noob);\r\n  }\r\n}\r\n\r\nconst sessionService = new SessionService();\r\n\r\nexport default sessionService;","// This file contains utility functions used across the application\r\n\r\n/**\r\n * Converts an unsigned array to a uri base64 string\r\n * @param data Array of unsigned integers data\r\n */\r\n\r\n\r\nexport function Uint8ArrayToStringBase64(data) {\r\n    let binary = '';\r\n    const len = data.byteLength;\r\n\r\n    for (let i = 0; i < len; ++i) {\r\n        binary += String.fromCharCode(data[i]);\r\n    }\r\n    return window.btoa(binary);\r\n}\r\n\r\n/**\r\n * Converts a uri base64 string to an unsigned array\r\n * @param src Uri base64 data\r\n */\r\nexport function stringToUint(src) {\r\n    const binary = window.atob(src);\r\n    const len = binary.length;\r\n    const bytes = new Uint8Array(len);\r\n\r\n    for (let i = 0; i < len; ++i) {\r\n        bytes[i] = binary.charCodeAt(i);\r\n    }\r\n    return bytes;\r\n}\r\n\r\nexport function logout(router) {\r\n    let noob = localStorage.getItem('noob');\r\n    if (noob == null) {\r\n        noob = '1';\r\n    }\r\n    localStorage.clear();\r\n    localStorage.setItem('noob', noob);\r\n    router.navigateByUrl('');\r\n}\r\n\r\n/**\r\n * Given a uri representation of an image of the form data:image/extension;base64, data, it returns the extesion of the image\r\n * @param base64 uri base64 data\r\n */\r\nexport function getExtensionImageFromURI(base64) {\r\n    if (base64.length <= 22 || base64.substr(0, 4) !== 'data') {\r\n        throw new Error('Invalid URI');\r\n    }\r\n    const l = base64.indexOf(':') + 1;\r\n    if (l !== 5) {\r\n        throw new Error('Invalid URI');\r\n    }\r\n    const type = base64.substr(l, 6);\r\n    if (type !== 'image/') {\r\n        throw new Error('Invalid URI');\r\n    }\r\n    const semicolon = base64.indexOf(';') + 1;\r\n\r\n    if (semicolon === 0) {\r\n        throw new Error('Invalid URI');\r\n    }\r\n\r\n    const uri = base64.substr(semicolon, 7);\r\n\r\n    if (uri !== 'base64,') {\r\n        throw new Error('Invalid URI');\r\n    }\r\n\r\n    const extension = base64.substr(l + 6, semicolon - 1 - l - 6);\r\n\r\n    return extension.toLowerCase();\r\n}\r\n\r\n/**\r\n * Transforms a URI - base64 to a blob\r\n */\r\nexport function b64toBlob(dataURI) {\r\n    const byteString = atob(dataURI.split(',')[1]);\r\n    const ab = new ArrayBuffer(byteString.length);\r\n    const ia = new Uint8Array(ab);\r\n\r\n    for (let i = 0; i < byteString.length; i++) {\r\n        ia[i] = byteString.charCodeAt(i);\r\n    }\r\n    return new Blob([ab], { type: 'application/pdf' });\r\n}\r\n\r\n/**\r\n * Gets the hexadecimal representation of a rgba color\r\n */\r\nexport function getHexColorFromRgba(color) {\r\n    if (color === 'rgba(158,234,170,0.5)') {\r\n        return '#9eeaaa';\r\n    } else {\r\n        return '#a0daff';\r\n    }\r\n}\r\n\r\n/**\r\n * Returns an object with details about the client machine\r\n * @param window window object\r\n */\r\nexport function datosMaquina(window) {\r\n    {\r\n        const unknown = 'unknown';\r\n\r\n        // browser\r\n        const nVer = navigator.appVersion;\r\n        const nAgt = navigator.userAgent;\r\n        var browser = navigator.appName;\r\n        var version = '' + parseFloat(navigator.appVersion);\r\n        var majorVersion = parseInt(navigator.appVersion, 10);\r\n        let nameOffset;\r\n        let verOffset;\r\n        let ix;\r\n\r\n        if ((verOffset = nAgt.indexOf('Opera')) != -1) {\r\n            browser = 'Opera';\r\n            version = nAgt.substring(verOffset + 6);\r\n            if ((verOffset = nAgt.indexOf('Version')) != -1) {\r\n                version = nAgt.substring(verOffset + 8);\r\n            }\r\n        }\r\n        if ((verOffset = nAgt.indexOf('OPR')) != -1) {\r\n            browser = 'Opera';\r\n            version = nAgt.substring(verOffset + 4);\r\n        } else if ((verOffset = nAgt.indexOf('Edge')) != -1) {\r\n            browser = 'Microsoft Edge';\r\n            version = nAgt.substring(verOffset + 5);\r\n        } else if ((verOffset = nAgt.indexOf('MSIE')) != -1) {\r\n            browser = 'Microsoft Internet Explorer';\r\n            version = nAgt.substring(verOffset + 5);\r\n        } else if ((verOffset = nAgt.indexOf('Chrome')) != -1) {\r\n            browser = 'Chrome';\r\n            version = nAgt.substring(verOffset + 7);\r\n        } else if ((verOffset = nAgt.indexOf('Safari')) != -1) {\r\n            browser = 'Safari';\r\n            version = nAgt.substring(verOffset + 7);\r\n            if ((verOffset = nAgt.indexOf('Version')) != -1) {\r\n                version = nAgt.substring(verOffset + 8);\r\n            }\r\n        } else if ((verOffset = nAgt.indexOf('Firefox')) != -1) {\r\n            browser = 'Firefox';\r\n            version = nAgt.substring(verOffset + 8);\r\n        } else if (nAgt.indexOf('Trident/') != -1) {\r\n            browser = 'Microsoft Internet Explorer';\r\n            version = nAgt.substring(nAgt.indexOf('rv:') + 3);\r\n        } else if ((nameOffset = nAgt.lastIndexOf(' ') + 1) < (verOffset = nAgt.lastIndexOf('/'))) {\r\n            browser = nAgt.substring(nameOffset, verOffset);\r\n            version = nAgt.substring(verOffset + 1);\r\n            if (browser.toLowerCase() === browser.toUpperCase()) {\r\n                browser = navigator.appName;\r\n            }\r\n        }\r\n        // trim the version string\r\n        if ((ix = version.indexOf(';')) != -1) {\r\n            version = version.substring(0, ix);\r\n        }\r\n        if ((ix = version.indexOf(' ')) != -1) {\r\n            version = version.substring(0, ix);\r\n        }\r\n        if ((ix = version.indexOf(')')) != -1) {\r\n            version = version.substring(0, ix);\r\n        }\r\n\r\n        majorVersion = parseInt('' + version, 10);\r\n        if (isNaN(majorVersion)) {\r\n            version = '' + parseFloat(navigator.appVersion);\r\n            majorVersion = parseInt(navigator.appVersion, 10);\r\n        }\r\n\r\n        // system\r\n        var os = unknown;\r\n        const clientStrings = [\r\n            { s: 'Windows 10', r: /(Windows 10.0|Windows NT 10.0)/ },\r\n            { s: 'Windows 8.1', r: /(Windows 8.1|Windows NT 6.3)/ },\r\n            { s: 'Windows 8', r: /(Windows 8|Windows NT 6.2)/ },\r\n            { s: 'Windows 7', r: /(Windows 7|Windows NT 6.1)/ },\r\n            { s: 'Windows Vista', r: /Windows NT 6.0/ },\r\n            { s: 'Windows Server 2003', r: /Windows NT 5.2/ },\r\n            { s: 'Windows XP', r: /(Windows NT 5.1|Windows XP)/ },\r\n            { s: 'Windows 2000', r: /(Windows NT 5.0|Windows 2000)/ },\r\n            { s: 'Windows ME', r: /(Win 9x 4.90|Windows ME)/ },\r\n            { s: 'Windows 98', r: /(Windows 98|Win98)/ },\r\n            { s: 'Windows 95', r: /(Windows 95|Win95|Windows_95)/ },\r\n            { s: 'Windows NT 4.0', r: /(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/ },\r\n            { s: 'Windows CE', r: /Windows CE/ },\r\n            { s: 'Windows 3.11', r: /Win16/ },\r\n            { s: 'Android', r: /Android/ },\r\n            { s: 'Open BSD', r: /OpenBSD/ },\r\n            { s: 'Sun OS', r: /SunOS/ },\r\n            { s: 'Chrome OS', r: /CrOS/ },\r\n            { s: 'Linux', r: /(Linux|X11(?!.*CrOS))/ },\r\n            { s: 'iOS', r: /(iPhone|iPad|iPod)/ },\r\n            { s: 'Mac OS X', r: /Mac OS X/ },\r\n            { s: 'Mac OS', r: /(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/ },\r\n            { s: 'QNX', r: /QNX/ },\r\n            { s: 'UNIX', r: /UNIX/ },\r\n            { s: 'BeOS', r: /BeOS/ },\r\n            { s: 'OS/2', r: /OS\\/2/ },\r\n            { s: 'Search Bot', r: /(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\\/Teoma|ia_archiver)/ }\r\n        ];\r\n        for (var id in clientStrings) {\r\n            var cs = clientStrings[id];\r\n            if (cs.r.test(nAgt)) {\r\n                os = cs.s;\r\n                break;\r\n            }\r\n        }\r\n\r\n        var osVersion = unknown;\r\n\r\n        if (/Windows/.test(os)) {\r\n            osVersion = /Windows (.*)/.exec(os)[1];\r\n            os = 'Windows';\r\n        }\r\n\r\n        switch (os) {\r\n            case 'Mac OS X':\r\n                osVersion = /Mac OS X (10[\\.\\_\\d]+)/.exec(nAgt)[1];\r\n                break;\r\n\r\n            case 'Android':\r\n                osVersion = /Android ([\\.\\_\\d]+)/.exec(nAgt)[1];\r\n                break;\r\n\r\n            case 'iOS':\r\n                osVersion = /OS (\\d+)_(\\d+)_?(\\d+)?/.exec(nVer);\r\n                osVersion = osVersion[1] + '.' + osVersion[2] + '.' + (osVersion[3] | 0);\r\n                break;\r\n        }\r\n    }\r\n\r\n    return window.jscd = {\r\n        browser: browser,\r\n        browserVersion: version,\r\n        browserMajorVersion: majorVersion,\r\n        os: os,\r\n        osVersion: osVersion\r\n    };\r\n}\r\n\r\nexport function detectWebcam() {\r\n    const mediaDevices = navigator.mediaDevices;\r\n\r\n    return new Promise((resolve, reject) => {\r\n      if (!mediaDevices || !mediaDevices.enumerateDevices) {\r\n        console.log('No hay media devices, saltar al prximo paso !');\r\n        resolve(false);\r\n      }\r\n\r\n      mediaDevices.enumerateDevices().then((devices) => {\r\n        if (devices.some(device => device.kind === 'videoinput')) {\r\n            resolve(true);\r\n        } else {\r\n            resolve(false);\r\n        }\r\n      }).catch(()=> reject(false));\r\n    });\r\n}"],"sourceRoot":""}